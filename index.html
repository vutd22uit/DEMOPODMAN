<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Podman với CI/CD bằng GitHub Actions</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Demo Podman với CI/CD bằng GitHub Actions</h1>
    </header>
    <div class="container">
        <p>Hướng dẫn này sẽ giúp bạn thiết lập CI/CD bằng GitHub Actions để deploy ứng dụng Podman trên EC2.</p>
        
        <h2>Bước 1: Thiết lập Repository trên GitHub</h2>
        <p>Tạo một repository mới trên GitHub hoặc sử dụng repository hiện tại.</p>

        <h2>Bước 2: Viết Dockerfile cho ứng dụng Podman</h2>
        <p>Tạo file <code>Dockerfile</code> trong thư mục gốc của dự án:</p>
        <pre>
<code>FROM fedora:latest
RUN dnf -y update && dnf -y install podman
COPY . /app
WORKDIR /app
CMD ["podman", "run", "-p", "8080:80", "your-podman-image"]</code>
        </pre>

        <h2>Bước 3: Tạo GitHub Actions Workflow</h2>
        <p>Tạo thư mục <code>.github/workflows</code> trong dự án của bạn và tạo file <code>ci-cd.yml</code> với nội dung sau:</p>
        <pre>
<code>name: CI/CD Pipeline

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Set up Podman
      run: |
        sudo apt-get update
        sudo apt-get -y install podman

    - name: Build Docker Image
      run: podman build -t your-podman-image .

    - name: Push to EC2
      run: |
        scp -i your-ec2-key.pem your-podman-image.tar ec2-user@your-ec2-ip:/home/ec2-user/
        ssh -i your-ec2-key.pem ec2-user@your-ec2-ip 'podman load -i /home/ec2-user/your-podman-image.tar && podman run -d -p 8080:80 your-podman-image'</code>
        </pre>

        <h2>Bước 4: Cấu hình EC2 Instance</h2>
        <p>Đảm bảo rằng bạn đã cài đặt Podman trên EC2 và mở cổng 8080 trên Security Group:</p>
        <pre>
<code>sudo yum -y update
sudo yum -y install podman</code>
        </pre>

        <h2>Bước 5: Deploy ứng dụng</h2>
        <p>Mỗi khi bạn đẩy code lên nhánh <code>main</code>, GitHub Actions sẽ tự động build image Podman và deploy lên EC2.</p>

        <h2>Kết luận</h2>
        <p>Bạn đã hoàn thành việc thiết lập CI/CD cho ứng dụng Podman với GitHub Actions và deploy lên EC2. Bây giờ mỗi khi bạn đẩy code, ứng dụng sẽ tự động được build và deploy.</p>
    </div>
    <footer>
        <p>&copy; 2024 Demo Podman CI/CD</p>
    </footer>
</body>
</html>
